# 이더리움 기반의 증권지수 복권 컨트랙트

## 1. 개요

    증권 지수의 숫자 조합을 당첨 번호로 하는 복권의 구매, 추첨, 배분을 스마트 컨트랙트로 구현

### 1.1 당첨 번호

    KOSPI의 소수점이하 2자리 + KOSDAQ의 소수점이하 2자리

### 1.2 당첨 시간

    금요일 동시호가 마감 시간

### 1.3 복권 구매 가능 시간

    월요일 동시호가 개장 ~ 금요일 동시호가 마감 1시간 전

### 1.4 복권 구매

    1) 복권 단위 가격 : 0.02 ether 고정 (운용 선취수수료 : 10%, 배당 대상 금액 : 90%)
    2) 복권 매수 : 1매 이상 구매 가능 
    3) 복권 번호 : 직접 숫자 4자리 입력. 동일인(지갑주소)이 여러 복권번호로 구매 가능.

### 1.5 당첨금 분배

    1) 당첨번호와 일치하는 복권번호가 있는 경우

        a. 당첨된 Wallet주소별로 배당 금액을 계산한 장부를 작성한다.

            배당금 = 모금액 * 분배율
        
        . 모금액 = (이월된 복권매수 + 당회차 전체복권매수) * 복권단가
        . 분배율 = 해당 Wallet주소의 복권매수 / 당첨번호의 복권매수 합계
        . 단수처리 : 임의의 계약에 단수금액 합산
        
        b. 위에 작성한 장부와 총 배당금액을 지급계약으로 전송한다.

    2) 당첨번호와 일치하는 복권번호가 없는 경우, 이월금액으로 누적한다.

### 2. 시스템 구조 설계

    UI (Web Service 또는 MataMask) + Block Chanin Contract (복권, 지급, 데이터 제공)

### 2.1 Web Service

    1) 복권 구매 기능 : 지갑주소와 복권번호를 직접 입력하여 구매. 
                       Mata Mask에서 직접 이더 전송을 통해 복권 구매.
    2) 복권 판매 현황 : 총 판매금액과 마감 시간 공지 등
    3) 계약 관리 기능 : Contract 가스비 관리, 판매 매수 관리, 기타 Contract 에러 상황 대응 등

### 1.2 Block Chanin Contract

    1) 복권 계약 : 복권 구매 기장, 당첨 처리

